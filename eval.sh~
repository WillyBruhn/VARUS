#!/bin/bash
# Evaluating BRAKER1 predictions for Application Note
# Willy Bruhn
# Dec 13 2017
# 
# run this from the directory where the output of braker is stored. 
# There should be a directory called "braker" in the folder
# 
#-------------------------------------------------------------------------

path="$PWD/"

ABSOLUTE_PATH="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)/"

echo $ABSOLUTE_PATH


#cd /nas-hs/projs/braker/topaz/project/Schizosaccharomyces_pombe/varus_test

cat $PWD/braker/Sp_1/augustus.gff | perl -ne "
if(m/\tAUGUSTUS\t/){print $_;}" | gtf2gff.pl --printExon --out=augustus.masked.gtf


exit 0
cat augustus.masked.gtf | perl -ne '@t = split(/\t/); if(($t[2] eq "CDS") or ($t[2] eq "exon") or ($t[2] eq "start_codon") 
or ($t[2] eq "UTR")){print $_;}' >augustus.masked.f.gtf

# Teil vom eval-Paket
validate_gtf.pl -c -f augustus.masked.f.gtf

# seqlist enthaelt Chromosomen-Namen
grep ">" genome.fa | perl -pe 's/>//;' > seqlist

eval_multi_gtf.pl seqlist /nas-hs/projs/braker/topaz/project/Schizosaccharomyces_pombe/annot/annot.gtf augustus.masked.f.fixed.gtf 1> masked.eval.o
ut 2> masked.eval.err
